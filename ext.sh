find ext -type f | xargs grep -rin FUNC_DEF | awk -F : '{l=index($3,"(");r=index($3,")");files[$1]=1;funcs[substr($3,l+1,r-l-1)]=1;}END{for(k in files){print "#include \""k"\"";}print "void ext_funcs() {";for(k in funcs){print "    if(zend_hash_add(&funcs, \""k"\", "length(k)", &calc_def_"k", 0, NULL) == FAILURE) printf(\"function "k"() exists.\\n\");";}print "}";}' > ext.c
find ext -type f | xargs grep -rin CONST_DEF | awk -F : '{l=index($3,"(");r=index($3,")");files[$1]=1;funcs[substr($3,l+1,r-l-1)]=1;}END{for(k in files){print "#include \""k"\"";}print "void ext_consts() {";for(k in funcs){print "    if(zend_hash_add(&consts, \""k"\", "length(k)", &calc_const_"k", 0, NULL) == FAILURE) printf(\"const "k" exists.\\n\");";}print "}";}' >> ext.c
